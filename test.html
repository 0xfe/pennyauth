<html>
  <head>
    <link rel="stylesheet" href="https://js.quid.works/v1/assets/quid.css" />
    <link rel="stylesheet" href="test.css" />
  </head>
  <body>
    <div class="demo container">
      <p style="padding: 20px;"></p>
      <form id="login-form" class="container">
        <h3>Login to FooBar</h3>
        <br />
        <div class="formgroup">
          <input id="username" type="text" placeholder="Your email address" />
        </div>
        <div>
          <input id="password" type="password" placeholder="Your password" />
        </div>
        <div id="pennyauth-container"></div>
        <button id="loginButton" type="submit" disabled>LOGIN</button>
      </form>
      <div id="success" style="display:none;">
        <h1>Success!</h1>
      </div>
    </div>

    <script src="http://localhost:8082/dist/client.dev.js"></script>
    <script src="dist/pennyauth.dev.js"></script>
    <script>
      const loginButton = document.getElementById('loginButton');
      const formEl = document.getElementById('login-form');
      const successEl = document.getElementById('success');

      const client = pennyauth.initDev(
        () => {},
        () => {
          loginButton.disabled = false;
        }
      );

      function login(ev) {
        loginButton.disabled = true;
        ev.preventDefault();
        client.ask(
          resp => {
            console.log(resp);
            formEl.style.display = 'none';
            successEl.style.display = 'block';
            loginButton.disabled = false;
          },
          e => {
            console.error(e);
            loginButton.disabled = false;
          }
        );
        return false;
      }

      formEl.addEventListener('submit', login);
    </script>
  </body>
</html>
